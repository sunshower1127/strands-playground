# STEP CB: μ„λ² λ”© ν΄λΌμ΄μ–ΈνΈ κµ¬ν„

## μƒνƒ: μ™„λ£ β…

## μ™„λ£λ μ‘μ—…
- [x] boto3 μ„¤μΉ (μ΄λ―Έ μ„¤μΉλ¨)
- [x] AWS IAM μ‚¬μ©μ μƒμ„± λ° κ¶ν• μ„¤μ •
- [x] Bedrock λ¨λΈ μ ‘κ·Ό ν™μ„±ν™”
- [x] EmbeddingClient ν΄λμ¤ κµ¬ν„
- [x] μ„λ² λ”© ν…μ¤νΈ μ„±κ³µ

---

## κΈ°μ  μ¤νƒ

### AWS Bedrock
- λ¨λΈ: `amazon.titan-embed-text-v2:0`
- μ°¨μ›: 1024
- λ¦¬μ „: `us-east-1`

### IAM κ¶ν•
- μ •μ±…: `AmazonBedrockFullAccess`

---

## κµ¬ν„ κ²°κ³Ό

### ν™κ²½ λ³€μ (.env)

```bash
AWS_ACCESS_KEY_ID=xxx
AWS_SECRET_ACCESS_KEY=xxx
AWS_REGION=us-east-1
```

### EmbeddingClient ν΄λμ¤

```python
# src/embedding_client.py
from embedding_client import EmbeddingClient

client = EmbeddingClient()
embedding = client.embed("ν…μ¤νΈ")  # -> list[float] (1024μ°¨μ›)
```

### ν…μ¤νΈ κ²°κ³Ό

```
Model: amazon.titan-embed-text-v2:0
Region: us-east-1
Embedding dimension: 1024
First 5 values: [-0.049, 0.017, 0.023, -0.043, 0.062]
```

---

## μ„λ² λ”© λ¨λΈ κ°„ νΈν™μ„±

### κ²°λ΅ : νΈν™λμ§€ μ•μ β

λ‹¤λ¥Έ μ„λ² λ”© λ¨λΈλ΅ μƒμ„±ν• λ²΅ν„°λ” μ„λ΅ νΈν™λμ§€ μ•μµλ‹λ‹¤.
μ: TitanμΌλ΅ μ„λ² λ”©ν• λ¬Έμ„λ¥Ό Vertex AI λ¨λΈλ΅ κ²€μƒ‰ λ¶κ°€

### μ΄μ 

1. **μ°¨μ›(Dimension)μ΄ λ‹¤λ¦„**
   - Titan Embeddings v2: 1024μ°¨μ›
   - Vertex AI (text-embedding-004): 768μ°¨μ›
   - OpenAI ada-002: 1536μ°¨μ›
   - Cohere: 1024μ°¨μ›

2. **λ²΅ν„° κ³µκ°„μ΄ λ‹¤λ¦„**
   - κ° λ¨λΈμ€ μμ²΄μ μΈ ν•™μµ λ°μ΄ν„°μ™€ μ•κ³ λ¦¬μ¦μΌλ΅ ν›λ ¨λ¨
   - κ°™μ€ ν…μ¤νΈλΌλ„ μ™„μ „ν λ‹¤λ¥Έ λ²΅ν„° κ³µκ°„μ— λ§¤ν•‘λ¨
   - "κ³ μ–‘μ΄"λΌλ” λ‹¨μ–΄κ°€ λ¨λΈ Aμ—μ„λ” `[0.1, 0.5, ...]`, λ¨λΈ Bμ—μ„λ” `[0.8, -0.2, ...]`λ΅ ν‘ν„

3. **μ μ‚¬λ„ κ²€μƒ‰ λ¶κ°€**
   - TitanμΌλ΅ μ„λ² λ”©ν• λ¬Έμ„λ¥Ό Vertex λ¨λΈλ΅ μΏΌλ¦¬ν•λ©΄
   - λ²΅ν„° κ³µκ°„ μμ²΄κ°€ λ‹¤λ¥΄κΈ° λ•λ¬Έμ— μ μ‚¬λ„ κ³„μ‚°μ΄ λ¬΄μλ―Έν•¨

### μμ‹

```python
# TitanμΌλ΅ μ €μ¥ν• λ²΅ν„° DB
documents = titan_embed(["AIλ” μΈκ³µμ§€λ¥μ…λ‹λ‹¤"])  # [0.1, 0.2, ..., 0.5] (1024μ°¨μ›)

# Vertexλ΅ κ²€μƒ‰ μ‹λ„
query = vertex_embed("μΈκ³µμ§€λ¥μ΄ λ­μ•Ό?")  # [0.8, -0.1, ..., 0.3] (768μ°¨μ›)

# β μ°¨μ›λ„ λ‹¤λ¥΄κ³ , κ°™μ€ μ°¨μ›μ΄μ–΄λ„ λ²΅ν„° κ³µκ°„μ΄ λ‹¬λΌμ„ μλ―Έ μ—†μ
```

### ν•΄κ²° λ°©λ²•

| μƒν™© | ν•΄κ²°μ±… |
|------|--------|
| λ¨λΈ λ³€κ²½ ν•„μ” | μ „μ²΄ λ¬Έμ„ μ¬μ„λ² λ”© |
| λ©€ν‹° λ¨λΈ μ‚¬μ© | κ° λ¨λΈλ³„λ΅ λ³„λ„ μΈλ±μ¤ μ μ§€ |
| λ§μ΄κ·Έλ μ΄μ… | μƒ λ¨λΈλ΅ μ „μ²΄ λ°μ΄ν„° μ¬μ²λ¦¬ |

> π’΅ μ„λ² λ”© λ¨λΈμ„ μ„ νƒν•  λ•λ” μ¥κΈ°μ μΌλ΅ μ‚¬μ©ν•  λ¨λΈμ„ μ‹ μ¤‘ν κ³ λ¥΄λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤.

---

## νμΌ κµ¬μ΅°

```
src/
  embedding_client.py    # μ„λ² λ”© ν΄λΌμ΄μ–ΈνΈ ν΄λμ¤
```
