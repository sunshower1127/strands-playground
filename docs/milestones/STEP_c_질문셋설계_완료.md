# STEP C: 질문셋 및 테스트 문서 설계

## 상태: 완료

## 할 일
- [x] 도메인 결정 (가상 회사 종합)
- [x] 질문 유형 정의 (Level 1-4)
- [x] 평가 방식 결정 (수동)
- [x] 질문셋 18개 확정 (`data/questions/question_set.json`)
- [x] 테스트 문서 14개 작성 (핵심 9개 + 노이즈 5개)
- [x] OpenSearch 업로드 (Wissly 사용, project_id=334)

---

## 목표
에이전트 유무에 따른 RAG 성능 차이를 측정할 수 있는 질문셋과 문서 세트 생성

## 결정 사항
- **도메인**: 가상 회사 종합 (정책 + 기술문서 + 프로젝트)
- **규모**: 소규모(15-20개)로 시작 → 검증 후 확장
- **웹검색**: 포함 (전체의 20-30%)
- **평가**: 수동 (Human Review)

---

## 가상 회사 설정: "TechFlow Inc."

### 회사 개요
- IT 솔루션 스타트업 (직원 50명)
- 주력 제품: "FlowSync" (협업 툴)
- 설립: 2020년

### 문서 카테고리 (총 9개)
1. **HR 정책** (3개)
   - 휴가정책.md
   - 복지제도.md
   - 재택가이드.md

2. **제품 문서** (3개)
   - 기능가이드.md
   - api문서.md
   - 트러블슈팅.md

3. **프로젝트 문서** (3개)
   - 로드맵2024.md
   - 회의록.md
   - 변경이력.md

---

## 질문셋 설계 (총 18개)

### Level 1: Single Retrieval (4개) - Baseline
| # | 질문 | 필요 문서 | 도구 |
|---|------|----------|------|
| 1 | "연차 휴가는 며칠인가?" | 휴가정책 | 문서검색 |
| 2 | "FlowSync의 주요 기능 3가지는?" | 기능가이드 | 문서검색 |
| 3 | "재택근무 신청 방법은?" | 재택가이드 | 문서검색 |
| 4 | "현재 FlowSync 버전은?" | 변경이력 | 문서검색 |

### Level 2: Multi Retrieval (5개)
| # | 질문 | 필요 문서 | 도구 |
|---|------|----------|------|
| 5 | "휴가와 재택근무를 동시에 사용할 수 있나?" | 휴가정책 + 재택가이드 | 문서검색 |
| 6 | "복지 포인트로 사용 가능한 항목 전체 목록은?" | 복지제도 | 문서검색 |
| 7 | "Q3에 계획된 FlowSync 신기능들은?" | 로드맵 + 회의록 | 문서검색 |
| 8 | "API 에러 코드 401과 403의 차이는?" | API문서 + 트러블슈팅 | 문서검색 |
| 9 | "최근 3개월간 주요 변경사항을 정리해줘" | 변경이력 + 회의록 | 문서검색 |

### Level 3: Multi-step Reasoning (5개)
| # | 질문 | 필요 문서 | 도구 |
|---|------|----------|------|
| 10 | "입사 1년차가 해외여행을 가려면 어떤 절차가 필요한가?" | 휴가정책 + 복지제도 | 문서검색 |
| 11 | "FlowSync에서 파일 동기화 오류가 나면 어떻게 해결하나?" | 트러블슈팅 + 기능가이드 | 문서검색 |
| 12 | "로드맵에서 지연된 기능과 그 이유는?" | 로드맵 + 회의록 + 변경이력 | 문서검색 |
| 13 | "재택근무 중 병가를 내려면?" | 재택가이드 + 휴가정책 | 문서검색 |
| 14 | "신규 입사자가 FlowSync API를 사용하려면 어떤 권한이 필요한가?" | API문서 + HR정책 | 문서검색 |

### Level 4: Multi-tool (4개) - 웹검색 포함
| # | 질문 | 필요 문서 | 도구 |
|---|------|----------|------|
| 15 | "우리 휴가 정책이 한국 근로기준법에 맞는가?" | 휴가정책 + 웹(근로기준법) | 복합 |
| 16 | "FlowSync와 Slack/Notion 기능 비교해줘" | 기능가이드 + 웹(경쟁사) | 복합 |
| 17 | "2024 IT 트렌드 중 우리 로드맵에 반영된 것은?" | 로드맵 + 웹(IT트렌드) | 복합 |
| 18 | "원격근무 관련 최신 법규 변경사항이 우리 정책에 영향 있나?" | 재택가이드 + 웹(법규) | 복합 |

---

## 평가 방식: 수동 (Human Review)

각 질문에 대해 에이전트 유무 두 가지 버전의 답변을 생성하고, 직접 읽어보면서 비교 평가.

### 평가 항목
| 항목 | 설명 |
|------|------|
| **정확성** | 사실이 맞는가? |
| **완전성** | 필요한 정보가 다 있는가? |
| **관련성** | 질문에 맞는 답변인가? |
| **추론력** | 정보를 잘 연결했는가? (Level 3-4) |

---

## 파일 구조

```
data/
├── test_docs/           # 테스트 문서 (총 14개, ~225청크)
│   ├── hr/              # 핵심 문서 - HR 정책
│   │   ├── 휴가정책.md
│   │   ├── 복지제도.md
│   │   └── 재택가이드.md
│   ├── product/         # 핵심 문서 - 제품
│   │   ├── 기능가이드.md
│   │   ├── api문서.md
│   │   └── 트러블슈팅.md
│   ├── project/         # 핵심 문서 - 프로젝트
│   │   ├── 로드맵2024.md
│   │   ├── 회의록.md
│   │   └── 변경이력.md
│   └── archive/         # 노이즈 문서 (검색 난이도 상승용)
│       ├── 회의록_2023하반기.md
│       ├── 온보딩가이드.md
│       ├── 보안정책.md
│       ├── 조직도_2024.md
│       └── 사내규정_요약.md
├── questions/
│   └── question_set.json
└── results/
    └── (테스트 결과)
```

## 문서 통계

- **핵심 문서**: 9개 (~75,000자)
- **노이즈 문서**: 5개 (~38,000자)
- **총 문자수**: ~113,000자
- **실제 청크수**: 78개 (Wissly 청킹 기준, 평균 ~1,400자)

## OpenSearch 업로드 결과

- **업로드 도구**: Wissly
- **Project ID**: 334
- **Index**: rag-index-fargate-live
- **총 청크**: 78개
- **청킹 품질**: 대부분 양호 (500-2000자), 일부 짧은 청크 존재 (~5개)
- **수집 데이터**: `data/texts_334.json`
